<template><dialog ref='root' class='modal' @close='onClose'><form method='dialog' class='w-[560px] bg-white border rounded shadow p-4'><h3 class='text-lg font-semibold mb-3'>Промокод</h3><div v-if='model' class='grid grid-cols-2 gap-3'><div class='col-span-2'><label class='text-sm block mb-1'>Код</label><input v-model='model.code' class='border rounded px-3 py-2 w-full'></div><div><label class='text-sm block mb-1'>% скидки</label><input v-model.number='model.percent' type='number' class='border rounded px-3 py-2 w-full'></div><div><label class='text-sm block mb-1'>Фикс. сумма</label><input v-model.number='model.amount' type='number' class='border rounded px-3 py-2 w-full'></div><label class='inline-flex items-center mt-1'><input type='checkbox' v-model='model.active' class='mr-2'> Активен</label></div><div class='mt-4 text-right space-x-2'><button class='border rounded px-3 py-1.5' @click.prevent='close'>Отмена</button><button class='rounded px-3 py-1.5 bg-black text-white' @click.prevent='submit'>Сохранить</button></div></form></dialog></template><script setup lang='ts'>import {ref} from 'vue';const root=ref(null as HTMLDialogElement|null);const model=ref<any>(null);const emit=defineEmits(['submit']);function open(data?:any){model.value=data?JSON.parse(JSON.stringify(data)):{id:'',code:'',active:true};root.value?.showModal()}function close(){root.value?.close()}function onClose(){}function submit(){emit('submit',model.value);close()}defineExpose({open,close})</script><style scoped>.modal::backdrop{background:rgba(0,0,0,.2)}</style>